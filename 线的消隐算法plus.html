<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Line Hidden Surface Removal</title>
    <style>
        canvas {
            display: block;
            margin: 20px auto;
            background-color: #fff;
            border: 1px solid #000;
        }
        button {
            display: block;
            margin: 10px auto;
        }
    </style>
</head>
<body>
    <canvas id="canvas" width="800" height="600"></canvas>
    <button onclick="rotateX()">Rotate X</button>
    <button onclick="rotateY()">Rotate Y</button>
    <button onclick="rotateZ()">Rotate Z</button>
    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const N = 8;

        const vertices = [
            [-1, -1, -1], [1, -1, -1], [1, 1, -1], [-1, 1, -1],
            [-1, -1, 1], [1, -1, 1], [1, 1, 1], [-1, 1, 1]
        ];

        const edges = [
            [0, 1], [1, 2], [2, 3], [3, 0],
            [4, 5], [5, 6], [6, 7], [7, 4],
            [0, 4], [1, 5], [2, 6], [3, 7]
        ];

        let transformedVertices = JSON.parse(JSON.stringify(vertices));

        function drawLine(x1, y1, x2, y2) {
            ctx.beginPath();
            ctx.moveTo(x1, y1);
            ctx.lineTo(x2, y2);
            ctx.stroke();
        }

        function project(vertex) {
            const scale = 100;
            const [x, y, z] = vertex;
            return [x * scale + canvas.width / 2, -y * scale + canvas.height / 2];
        }

        function transform(matrix) {
            for (let i = 0; i < N; i++) {
                const [x, y, z] = vertices[i];
                const [nx, ny, nz] = [
                    matrix[0][0] * x + matrix[0][1] * y + matrix[0][2] * z,
                    matrix[1][0] * x + matrix[1][1] * y + matrix[1][2] * z,
                    matrix[2][0] * x + matrix[2][1] * y + matrix[2][2] * z
                ];
                transformedVertices[i] = [nx, ny, nz];
            }
        }

        function rotateX() {
            const angle = Math.PI / 8;
            const cos = Math.cos(angle);
            const sin = Math.sin(angle);
            const matrix = [
                [1, 0, 0],
                [0, cos, -sin],
                [0, sin, cos]
            ];
            transform(matrix);
            draw();
        }

        function rotateY() {
            const angle = Math.PI / 8;
            const cos = Math.cos(angle);
            const sin = Math.sin(angle);
            const matrix = [
                [cos, 0, sin],
                [0, 1, 0],
                [-sin, 0, cos]
            ];
            transform(matrix);
            draw();
        }

        function rotateZ() {
            const angle = Math.PI / 8;
            const cos = Math.cos(angle);
            const sin = Math.sin(angle);
            const matrix = [
                [cos, -sin, 0],
                [sin, cos, 0],
                [0, 0, 1]
            ];
            transform(matrix);
            draw();
        }

        function isHidden(edge) {
            const [i1, i2] = edge;
            const [x1, y1, z1] = transformedVertices[i1];
            const [x2, y2, z2] = transformedVertices[i2];
            return z1 < 0 && z2 < 0;
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            for (const edge of edges) {
                if (!isHidden(edge)) {
                    const [i1, i2] = edge;
                    const [x1, y1] = project(transformedVertices[i1]);
                    const [x2, y2] = project(transformedVertices[i2]);
                    drawLine(x1, y1, x2, y2);
                }
            }
        }

        draw();
    </script>
</body>
</html>
